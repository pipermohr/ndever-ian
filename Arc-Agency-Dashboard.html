<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARC Realty Dashboard - Ndever Mockup</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="./favicon.png">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- React & ReactDOM CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel CDN for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nde-orange-700 { color: #EA580C; }
        .bg-nde-orange-700 { background-color: #EA580C; }
        .border-nde-orange-700 { border-color: #EA580C; }
        .text-nde-orange-600 { color: #F97316; }
    </style>
</head>
<body class="min-h-screen bg-gray-50 text-gray-900 antialiased p-4 sm:p-8">

    <div id="root"></div>

    <script type="text/babel">
        // Define the Ndever Score colors
        const NdeverColors = {
            LOW: { name: 'Low Ndever', color: '#10B981' }, // Green-500
            MEDIUM: { name: 'Medium Ndever', color: '#FBBF24' }, // Yellow-400
            HIGH: { name: 'High Ndever', color: '#FB923C' }, // Orange-400
            MAX: { name: 'Max Ndever', color: '#EA580C' }, // Orange-700 (Ndever Orange)
        };

        // Function to get color based on score
        const getScoreColor = (score) => {
            if (score >= 4) return NdeverColors.MAX;
            if (score >= 3) return NdeverColors.HIGH;
            if (score >= 2) return NdeverColors.MEDIUM;
            return NdeverColors.LOW;
        };

        // Mock Data for Objectives with Ndever Scores and new Goal Configurations
        const mockObjectives = [
            {
                id: 'obj1',
                name: 'Achieve $500K GCI in Q3',
                ndeScore: 4, // Max
                completion: 70, // Overall completion
                complexityScore: 80,
                type: 'Revenue Growth',
                goalConfig: {
                    type: 'Metric-based',
                    description: 'Increase Gross Commission Income to $500,000 by end of Q3.',
                    metrics: [
                        { name: 'GCI Achieved', current: 350000, target: 500000, unit: '$', dataType: 'currency', isAutomated: true, integrationSource: 'CRM (Salesforce)' },
                    ],
                    primaryMetric: 'GCI Achieved'
                }
            },
            {
                id: 'obj2',
                name: 'Complete Agent Onboarding & Certification',
                ndeScore: 2, // Medium
                completion: 85, // Overall completion
                complexityScore: 40,
                type: 'Agent Enablement',
                goalConfig: {
                    type: 'Completion-based',
                    description: 'Ensure all new agents hired in Q2 complete their full onboarding playbook and achieve sales certification.',
                    linkedPlaybooks: ['New Agent Onboarding Playbook V3', 'Sales Certification Path'],
                    linkedMilestones: ['Licensing Complete (Achieved)', 'CRM Training Complete (Achieved)'],
                    linkedTasks: ['Submit Final Certification Exam (Completed)', 'Attend Mentorship Session #3 (Completed)', 'Review Q2 Performance Feedback (Pending)']
                }
            },
            {
                id: 'obj3',
                name: 'Improve Client Retention Rate',
                ndeScore: 3, // High
                completion: 60, // Overall completion
                complexityScore: 60,
                type: 'Client Success',
                goalConfig: {
                    type: 'Hybrid',
                    description: 'Implement new client nurturing strategies to increase overall retention and collect more positive feedback.',
                    completionWeight: 40,
                    metricWeight: 60,
                    linkedPlaybooks: ['Client Nurturing Playbook', 'Annual Review Playbook'],
                    linkedMilestones: ['Client Feedback Survey Launched (Achieved)'],
                    metrics: [
                        { name: 'Retention Rate', current: 88, target: 92, unit: '%', dataType: 'percentage', isAutomated: false },
                        { name: 'NPS Score', current: 7.8, target: 8.5, unit: '', dataType: 'number', isAutomated: false }
                    ]
                }
            },
            {
                id: 'obj4',
                name: 'Expand Social Media Presence (Q3)',
                ndeScore: 1, // Low
                completion: 95,
                complexityScore: 20,
                type: 'Marketing',
                goalConfig: {
                    type: 'Completion-based',
                    description: 'Execute a new social media content strategy for Q3 to increase brand awareness.',
                    linkedPlaybooks: ['Q3 Social Media Content Calendar'],
                    linkedMilestones: ['Content Plan Approved (Achieved)', 'Platform Setup Complete (Achieved)'],
                    linkedTasks: ['Post Weekly Market Update (Completed)', 'Launch New Instagram Campaign (Completed)']
                }
            },
            {
                id: 'obj5',
                name: 'Optimize Lead Conversion Funnel',
                ndeScore: 4, // Max
                completion: 50,
                complexityScore: 90,
                type: 'Sales Operations',
                goalConfig: {
                    type: 'Metric-based',
                    description: 'Analyze and optimize the lead conversion funnel to improve conversion rates from MQL to SQL and SQL to Opportunity.',
                    metrics: [
                        { name: 'MQL to SQL Conversion', current: 15, target: 25, unit: '%', dataType: 'percentage', isAutomated: true, integrationSource: 'Marketing Automation' },
                        { name: 'SQL to Opp. Conversion', current: 30, target: 45, unit: '%', dataType: 'percentage', isAutomated: true, integrationSource: 'CRM (Salesforce)' }
                    ],
                    primaryMetric: 'SQL to Opp. Conversion'
                }
            },
        ];

        // Mock User/Group Data
        const mockUsersAndGroups = [
            { id: 'user1', name: 'Mechelle Wilder', role: 'Agency Owner', department: 'Leadership', group: 'ARC Leadership', isKeyLeader: true },
            { id: 'user2', name: 'John Doe', role: 'Head of Sales', department: 'Sales', group: 'Sales Team A', isKeyLeader: false },
            { id: 'user3', name: 'Jane Chan', role: 'Marketing Director', department: 'Marketing', group: 'Marketing Team', isKeyLeader: false },
            { id: 'user4', name: 'Mike Johnson', role: 'Recruiting Lead', department: 'HR', group: 'Recruiting Team', isKeyLeader: false },
            { id: 'user5', name: 'Sarah Lee', role: 'Compliance Officer', department: 'Operations', group: 'Operations Team', isKeyLeader: false },
            // Adding a few mock agents to demonstrate groups
            { id: 'agent1', name: 'Agent Alice', role: 'Real Estate Agent', department: 'Sales', group: 'Sales Team A', isKeyLeader: false },
            { id: 'agent2', name: 'Agent Bob', role: 'Real Estate Agent', department: 'Sales', group: 'Sales Team B', isKeyLeader: false },
            { id: 'agent3', name: 'Agent Carol', role: 'Real Estate Agent', department: 'Sales', group: 'Sales Team A', isKeyLeader: false },
            { id: 'agent4', name: 'Agent David', role: 'Real Estate Agent', department: 'Sales', group: 'Sales Team C', isKeyLeader: false },
            { id: 'agent5', name: 'Agent Eve', role: 'Real Estate Agent', department: 'Sales', group: 'Sales Team B', isKeyLeader: false },
        ];

        // Helper to group users by their assigned group
        const groupUsersByGroup = (users) => {
            return users.reduce((acc, user) => {
                const group = user.group || 'Unassigned';
                if (!acc[group]) {
                    acc[group] = [];
                }
                acc[group].push(user);
                return acc;
            }, {});
        };

        const groupedUsers = groupUsersByGroup(mockUsersAndGroups);


        // Component for the Objective Ring Visualization
        const ObjectiveRing = ({ completion, color, size = 24, strokeWidth = 3 }) => {
            const radius = (size - strokeWidth) / 2;
            const circumference = radius * 2 * Math.PI;
            const offset = circumference - (completion / 100) * circumference;

            return (
                <svg width={size} height={size} className="rounded-full">
                    <circle
                        className="text-gray-300"
                        strokeWidth={strokeWidth}
                        stroke="currentColor"
                        fill="transparent"
                        r={radius}
                        cx={size / 2}
                        cy={size / 2}
                    />
                    <circle
                        className={`transition-all duration-500 ease-in-out`}
                        strokeWidth={strokeWidth}
                        strokeLinecap="round"
                        stroke={color}
                        fill="transparent"
                        r={radius}
                        cx={size / 2}
                        cy={size / 2}
                        style={{
                            strokeDasharray: circumference,
                            strokeDashoffset: offset,
                            transform: 'rotate(-90deg)',
                            transformOrigin: '50% 50%',
                        }}
                    />
                    <text
                        x="50%"
                        y="50%"
                        textAnchor="middle"
                        dominantBaseline="middle"
                        fill="#4B5563" /* Directly setting fill color for visibility */
                        className="text-[10px] font-bold" /* Increased font size */
                    >
                        {completion}%
                    </text>
                </svg>
            );
        };

        // Component for the Current Objective Score Donut Chart
        const CurrentObjectiveScoreChart = ({ objectives }) => {
            const totalComplexity = objectives.reduce((sum, obj) => sum + obj.complexityScore, 0);
            let cumulativeAngle = 0;

            const segments = objectives.map((obj) => {
                const angle = (obj.complexityScore / totalComplexity) * 360;
                const startAngle = cumulativeAngle;
                const endAngle = cumulativeAngle + angle;
                cumulativeAngle = endAngle;

                // For completion arc
                const completionRatio = obj.completion / 100;
                const completionAngle = angle * completionRatio;
                const completionStartAngle = startAngle;
                const completionEndAngle = startAngle + completionAngle;

                const largeArcFlag = angle > 180 ? 1 : 0;
                const largeArcFlagCompletion = completionAngle > 180 ? 1 : 0;

                const outerRadius = 70; // Outer radius of the donut
                const innerRadius = 50; // Inner radius of the donut
                const centerX = 100;
                const centerY = 100;

                // Functions to convert polar to Cartesian coordinates
                const toCartesian = (radius, angleInDegrees) => {
                    const angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;
                    return {
                        x: centerX + (radius * Math.cos(angleInRadians)),
                        y: centerY + (radius * Math.sin(angleInRadians))
                    };
                };

                // Path for the segment itself (the "pie slice" part of the donut)
                const p1 = toCartesian(outerRadius, startAngle);
                const p2 = toCartesian(outerRadius, endAngle);
                const p3 = toCartesian(innerRadius, endAngle);
                const p4 = toCartesian(innerRadius, startAngle);

                const segmentPath = [
                    `M ${p4.x} ${p4.y}`, // Move to inner start point
                    `L ${p1.x} ${p1.y}`, // Draw line to outer start point
                    `A ${outerRadius} ${outerRadius} 0 ${largeArcFlag} 1 ${p2.x} ${p2.y}`, // Arc to outer end point
                    `L ${p3.x} ${p3.y}`, // Draw line to inner end point
                    `A ${innerRadius} ${innerRadius} 0 ${largeArcFlag} 0 ${p4.x} ${p4.y}`, // Arc back to inner start point
                    `Z`
                ].join(' ');

                // Path for the completion overlay (fills up a portion of the segment)
                const pc1 = toCartesian(outerRadius, completionStartAngle);
                const pc2 = toCartesian(outerRadius, completionEndAngle);
                const pc3 = toCartesian(innerRadius, completionEndAngle);
                const pc4 = toCartesian(innerRadius, completionStartAngle);

                const completionPath = [
                    `M ${pc4.x} ${pc4.y}`,
                    `L ${pc1.x} ${pc1.y}`,
                    `A ${outerRadius} ${outerRadius} 0 ${largeArcFlagCompletion} 1 ${pc2.x} ${pc2.y}`,
                    `L ${pc3.x} ${pc3.y}`,
                    `A ${innerRadius} ${innerRadius} 0 ${largeArcFlagCompletion} 0 ${pc4.x} ${pc4.y}`,
                    `Z`
                ].join(' ');

                const color = getScoreColor(obj.ndeScore).color;

                return (
                    <g key={obj.id}>
                        <path d={segmentPath} fill="#E5E7EB" className="transition-all duration-500 ease-out" /> {/* Base segment, light gray */}
                        <path d={completionPath} fill={color} className="transition-all duration-500 ease-out" /> {/* Filled portion */}
                    </g>
                );
            });

            const totalCompletion = objectives.reduce((sum, obj) => sum + obj.completion, 0);
            const overallProgress = (totalCompletion / objectives.length).toFixed(0);

            return (
                <div className="flex flex-col items-center justify-center p-4 bg-white rounded-xl shadow-md h-full">
                    <h3 className="text-xl font-semibold mb-4 text-gray-800">Current Objective Score</h3>
                    <div className="relative w-[200px] h-[200px]">
                        <svg width="200" height="200" viewBox="0 0 200 200">
                            {segments}
                        </svg>
                        <div className="absolute inset-0 flex items-center justify-center text-center">
                            <div className="text-gray-700 text-sm font-medium">
                                Overall Progress<br />
                                <span className="text-2xl font-bold text-nde-orange-700">{overallProgress}%</span>
                            </div>
                        </div>
                    </div>
                    <div className="mt-4 text-sm text-gray-600">
                        <h4 className="font-semibold mb-2 text-gray-800">Objectives Breakdown:</h4>
                        <ul className="grid grid-cols-1 md:grid-cols-2 gap-2">
                            {mockObjectives.map((obj) => (
                                <li key={obj.id} className="flex items-center">
                                    <span className="inline-block w-3 h-3 rounded-full mr-2" style={{ backgroundColor: getScoreColor(obj.ndeScore).color }}></span>
                                    {obj.name} ({obj.completion}%)
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
            );
        };


        // Reusable Mini Card for Objectives with Goal Configuration Details
        const ObjectiveMiniCard = ({ objective }) => {
            const { name, ndeScore, completion, goalConfig } = objective;
            const scoreInfo = getScoreColor(ndeScore);

            const renderGoalConfigDetails = (config) => {
                if (config.type === 'Completion-based') {
                    return (
                        <div className="text-xs text-gray-500 mt-2">
                            <p className="font-semibold text-gray-700">Goal Type: Completion-based</p>
                            <p className="mt-1 text-gray-600">{config.description}</p>
                            <ul className="list-disc list-inside ml-2 mt-2">
                                {config.linkedPlaybooks && config.linkedPlaybooks.map((pb, i) => <li key={`pb-${i}`}>Playbook: {pb}</li>)}
                                {config.linkedMilestones && config.linkedMilestones.map((ms, i) => <li key={`ms-${i}`}>Milestone: {ms}</li>)}
                                {config.linkedTasks && config.linkedTasks.slice(0, 1).map((t, i) => <li key={`t-${i}`}>Next Task: {t.split('(')[0].trim()}</li>)}
                            </ul>
                        </div>
                    );
                } else if (config.type === 'Metric-based') {
                    return (
                        <div className="text-xs text-gray-500 mt-2">
                            <p className="font-semibold text-gray-700">Goal Type: Metric-based</p>
                            <p className="mt-1 text-gray-600">{config.description}</p>
                            {config.metrics.map((metric, i) => (
                                <div key={metric.name} className="mt-1">
                                    <span className="font-medium text-gray-700">{metric.name}:</span> {metric.current}{metric.unit} / {metric.target}{metric.unit}
                                    <span className={`ml-2 text-[10px] ${metric.isAutomated ? 'text-blue-500 font-semibold' : 'text-gray-400'}`}>
                                        ({metric.isAutomated ? `Auto via ${metric.integrationSource}` : 'Manual'})
                                    </span>
                                    <div className="w-full bg-gray-200 rounded-full h-1.5 mt-1">
                                        <div className="h-1.5 rounded-full bg-blue-400" style={{ width: `${(metric.current / metric.target) * 100}%` }}></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    );
                } else if (config.type === 'Hybrid') {
                    return (
                        <div className="text-xs text-gray-500 mt-2">
                            <p className="font-semibold text-gray-700">Goal Type: Hybrid ({config.completionWeight}% Completion / {config.metricWeight}% Metrics)</p>
                            <p className="mt-1 text-gray-600">{config.description}</p>
                            <div className="mt-2">
                                <p className="font-medium text-gray-700">Completion Progress:</p>
                                <ul className="list-disc list-inside ml-2">
                                    {config.linkedPlaybooks && config.linkedPlaybooks.map((pb, i) => <li key={`hpb-${i}`}>Playbook: {pb}</li>)}
                                    {config.linkedMilestones && config.linkedMilestones.map((ms, i) => <li key={`hms-${i}`}>Milestone: {ms}</li>)}
                                </ul>
                            </div>
                            <div className="mt-2">
                                <p className="font-medium text-gray-700">Metric Progress:</p>
                                {config.metrics.map((metric, i) => (
                                    <div key={metric.name} className="mt-1">
                                        <span className="font-medium text-gray-700">{metric.name}:</span> {metric.current}{metric.unit} / {metric.target}{metric.unit}
                                        <span className={`ml-2 text-[10px] ${metric.isAutomated ? 'text-blue-500 font-semibold' : 'text-gray-400'}`}>
                                            ({metric.isAutomated ? `Auto via ${metric.integrationSource}` : 'Manual'})
                                        </span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    );
                }
                return null;
            };

            return (
                <div className="flex items-start p-4 bg-white rounded-xl shadow-sm border border-gray-100 min-w-[280px] h-full">
                    <ObjectiveRing completion={completion} color={scoreInfo.color} size={48} strokeWidth={4} />
                    <div className="ml-4 flex-grow">
                        <h4 className="text-md font-semibold text-gray-800">{name}</h4>
                        <p className="text-sm text-gray-600">
                            <span className="font-medium" style={{ color: scoreInfo.color }}>{scoreInfo.name}</span> Ndever Objective
                        </p>
                        {renderGoalConfigDetails(goalConfig)}
                    </div>
                </div>
            );
        };

        // Main Dashboard App
        const App = () => {
            const { useState, useEffect } = React;
            const [activeTab, setActiveTab] = useState('visibility'); // visibility, onboarding, teamHealth, compliance, enablement

            // Filter objectives to show only the first 5 for the individual cards
            const displayObjectives = mockObjectives.slice(0, 5);

            return (
                <div className="max-w-7xl mx-auto">
                    {/* Header */}
                    <header className="mb-8 bg-white p-6 rounded-xl shadow-md flex flex-col sm:flex-row justify-between items-start sm:items-center">
                        <div>
                            <h1 className="text-3xl font-bold text-gray-800">
                                ARC Realty: <span className="text-nde-orange-700">Agency Command Center</span>
                            </h1>
                            <p className="mt-2 text-lg text-gray-600">
                                Welcome, Mechelle! Your hub for predictable growth & agent enablement.
                            </p>
                            <p className="text-sm text-gray-500 mt-1">
                                (Agency Owner & Growth Leader)
                            </p>
                        </div>
                        <div className="mt-4 sm:mt-0 flex flex-col items-start sm:items-end">
                            <span className="text-sm text-gray-500">Last Updated: Jun 29, 2025</span>
                            <button className="mt-2 px-4 py-2 bg-nde-orange-700 text-white rounded-md shadow hover:bg-nde-orange-600 transition duration-200">
                                Refresh Data
                            </button>
                        </div>
                    </header>

                    {/* Key Agent & Recruiting Metrics (left) & Current Objective Score (right) - Two Columns */}
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        {/* Consolidated Key Agent & Recruiting Metrics */}
                        <div className="bg-white p-6 rounded-xl shadow-md h-full flex flex-col">
                            <h2 className="text-xl font-semibold mb-4 text-gray-800">Key Agent & Recruiting Metrics</h2>
                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 flex-grow">
                                <div className="p-4 bg-gray-50 rounded-lg shadow-sm">
                                    <p className="text-sm text-gray-500">Active Agents</p>
                                    <p className="text-2xl font-bold text-gray-800">65</p>
                                </div>
                                <div className="p-4 bg-gray-50 rounded-lg shadow-sm">
                                    <p className="text-sm text-gray-500">Avg. GCI per Agent</p>
                                    <p className="text-2xl font-bold text-green-600">$8,500</p>
                                </div>
                                <div className="p-4 bg-gray-50 rounded-lg shadow-sm">
                                    <p className="text-sm text-gray-500">Listings Closed (Q2)</p>
                                    <p className="text-2xl font-bold text-gray-800">125</p>
                                </div>
                                <div className="p-4 bg-gray-50 rounded-lg shadow-sm">
                                    <p className="text-sm text-gray-500">New Agent Hires (Q2)</p>
                                    <p className="text-2xl font-bold text-blue-600">8</p>
                                </div>
                                <div className="p-4 bg-gray-50 rounded-lg shadow-sm">
                                    <p className="text-sm text-gray-500">Recruiting Funnel Conv.</p>
                                    <p className="text-2xl font-bold text-purple-600">35%</p>
                                </div>
                                <div className="p-4 bg-gray-50 rounded-lg shadow-sm">
                                    <p className="text-sm text-gray-500">Agent Retention Rate</p>
                                    <p className="text-2xl font-bold text-green-600">92%</p>
                                </div>
                            </div>
                        </div>

                        {/* Current Objective Score Chart */}
                        <div>
                            <CurrentObjectiveScoreChart objectives={mockObjectives} />
                        </div>
                    </div>

                    {/* My Strategic Objectives - Single Column */}
                    <div className="bg-white p-6 rounded-xl shadow-md mb-6">
                        <h2 className="text-xl font-semibold mb-4 text-gray-800">My Strategic Objectives</h2>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            {displayObjectives.map(obj => (
                                <ObjectiveMiniCard key={obj.id} objective={obj} />
                            ))}
                        </div>
                    </div>

                    {/* Tabbed Section - Single Column */}
                    <div className="space-y-6">
                        {/* Tab Navigation for Agent Operations */}
                        <div className="bg-white p-2 rounded-xl shadow-md flex justify-around flex-wrap">
                            <button
                                className={`py-2 px-4 rounded-lg font-medium transition-colors ${activeTab === 'visibility' ? 'bg-gray-100 text-nde-orange-700' : 'text-gray-600 hover:bg-gray-50'}`}
                                onClick={() => setActiveTab('visibility')}
                            >
                                Agent Visibility
                            </button>
                            <button
                                className={`py-2 px-4 rounded-lg font-medium transition-colors ${activeTab === 'onboarding' ? 'bg-gray-100 text-nde-orange-700' : 'text-gray-600 hover:bg-gray-50'}`}
                                onClick={() => setActiveTab('onboarding')}
                            >
                                Agent Onboarding
                            </button>
                            <button
                                className={`py-2 px-4 rounded-lg font-medium transition-colors ${activeTab === 'teamHealth' ? 'bg-gray-100 text-nde-orange-700' : 'text-gray-600 hover:bg-gray-50'}`}
                                onClick={() => setActiveTab('teamHealth')}
                            >
                                Agent Health
                            </button>
                            <button
                                className={`py-2 px-4 rounded-lg font-medium transition-colors ${activeTab === 'compliance' ? 'bg-gray-100 text-nde-orange-700' : 'text-gray-600 hover:bg-gray-50'}`}
                                onClick={() => setActiveTab('compliance')}
                            >
                                Compliance & Training
                            </button>
                            <button
                                className={`py-2 px-4 rounded-lg font-medium transition-colors ${activeTab === 'enablement' ? 'bg-gray-100 text-nde-orange-700' : 'text-gray-600 hover:bg-gray-50'}`}
                                onClick={() => setActiveTab('enablement')}
                            >
                                Agent Enablement
                            </button>
                        </div>

                        {/* Tab Content */}
                        <div className="bg-white p-6 rounded-xl shadow-md">
                            {activeTab === 'visibility' && (
                                <div>
                                    <h2 className="text-xl font-semibold mb-4 text-gray-800">Agent Divisional Visibility</h2>
                                    <p className="text-gray-600 mb-4">
                                        Monitor the performance and status of agents across your sales teams.
                                    </p>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        {Object.entries(groupedUsers).map(([group, users]) => (
                                            <div key={group} className="p-4 border rounded-xl shadow-sm bg-gray-50">
                                                <h3 className="font-bold text-gray-800">{group} ({users.length} Agents)</h3>
                                                <ul className="mt-2 text-sm text-gray-600">
                                                    {users.slice(0, 5).map(user => (
                                                        <li key={user.id} className="flex items-center justify-between py-1">
                                                            <span>{user.name}</span>
                                                            {user.isKeyLeader && (
                                                                <span className="text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full">Leader</span>
                                                            )}
                                                        </li>
                                                    ))}
                                                    {users.length > 5 && (
                                                        <li className="text-xs text-gray-500 mt-1">...and {users.length - 5} more</li>
                                                    )}
                                                </ul>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {activeTab === 'onboarding' && (
                                <div>
                                    <h2 className="text-xl font-semibold mb-4 text-gray-800">Agent Onboarding Status</h2>
                                    <p className="text-gray-600 mb-4">
                                        Track every new agent's journey from hiring to full productivity and certification.
                                    </p>
                                    <ul className="space-y-4">
                                        <li className="p-4 border rounded-xl shadow-sm bg-gray-50">
                                            <div className="flex justify-between items-center mb-2">
                                                <h3 className="font-bold text-gray-800">Agent Max (Sales Team B)</h3>
                                                <span className="text-sm px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full">60% Complete</span>
                                            </div>
                                            <p className="text-gray-600 text-sm">Onboarding Playbook: CRM Proficiency Training Pending</p>
                                            <p className="text-xs text-gray-500 mt-2">
                                                <span className="font-semibold text-orange-600">AI Nudge:</span> Max's CRM training is behind schedule. Recommend assigning 'CRM Power User Playbook' or scheduling a hands-on session.
                                            </p>
                                        </li>
                                        <li className="p-4 border rounded-xl shadow-sm bg-gray-50">
                                            <div className="flex justify-between items-center mb-2">
                                                <h3 className="font-bold text-gray-800">Agent Chloe (Sales Team A)</h3>
                                                <span className="text-sm px-3 py-1 bg-green-100 text-green-700 rounded-full">90% Complete</span>
                                            </div>
                                            <p className="text-gray-600 text-sm">Onboarding Playbook: Ready for First Listing Assignment</p>
                                            <p className="text-xs text-gray-500 mt-2">
                                                <span className="font-semibold text-blue-600">AI Nudge:</span> Chloe is progressing ahead of schedule. Recommend assigning 'First Client Listing Playbook' to get her started.
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                            )}

                            {activeTab === 'teamHealth' && (
                                <div>
                                    <h2 className="text-xl font-semibold mb-4 text-gray-800">Agent Health: Identifying & Supporting Performers</h2>
                                    <p className="text-gray-600 mb-4">
                                        Proactive alerts and insights to identify agents at risk or needing support to optimize their performance.
                                    </p>
                                    <ul className="space-y-4">
                                        <li className="p-4 border rounded-xl shadow-sm bg-gray-50">
                                            <div className="flex justify-between items-center mb-2">
                                                <h3 className="font-bold text-gray-800">Agent Bob (Sales Team B)</h3>
                                                <span className="text-sm px-3 py-1 bg-red-100 text-red-700 rounded-full">High Risk</span>
                                            </div>
                                            <p className="text-gray-600 text-sm">Lead Conversion Rate: -15% in 30 days. Low CRM engagement.</p>
                                            <p className="text-xs text-gray-500 mt-2">
                                                <span className="font-semibold text-red-600">AI Nudge:</span> Bob's lead conversion is trending negatively. Recommend assigning 'Lead Conversion Playbook' or scheduling a 1:1 coaching session.
                                            </p>
                                        </li>
                                        <li className="p-4 border rounded-xl shadow-sm bg-gray-50">
                                            <div className="flex justify-between items-center mb-2">
                                                <h3 className="font-bold text-gray-800">Agent Carol (Sales Team A)</h3>
                                                <span className="text-sm px-3 py-1 bg-orange-100 text-orange-700 rounded-full">Medium Risk</span>
                                            </div>
                                            <p className="text-gray-600 text-sm">Client feedback score below target for 2 consecutive weeks.</p>
                                            <p className="text-xs text-gray-500 mt-2">
                                                <span className="font-semibold text-orange-600">AI Nudge:</span> Carol's client satisfaction is slipping. Suggest assigning 'Client Experience Best Practices Playbook'.
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                            )}

                            {activeTab === 'compliance' && (
                                <div>
                                    <h2 className="text-xl font-semibold mb-4 text-gray-800">Compliance & Training Progress</h2>
                                    <p className="text-gray-600 mb-4">
                                        Monitor agent adherence to critical regulatory requirements and required training modules.
                                    </p>
                                    <ul className="space-y-4">
                                        <li className="p-4 border rounded-xl shadow-sm bg-gray-50">
                                            <div className="flex justify-between items-center mb-2">
                                                <h3 className="font-bold text-gray-800">Q3 Ethics Training Module</h3>
                                                <span className="text-sm px-3 py-1 bg-red-100 text-red-700 rounded-full">5 Agents Overdue</span>
                                            </div>
                                            <p className="text-gray-600 text-sm">Mandatory ethics training outstanding for multiple agents.</p>
                                            <p className="text-xs text-gray-500 mt-2">
                                                <span className="font-semibold text-red-600">AI Nudge:</span> Ethics training is overdue for 5 agents. Send automated reminder and escalate to team leads.
                                            </p>
                                        </li>
                                        <li className="p-4 border rounded-xl shadow-sm bg-gray-50">
                                            <div className="flex justify-between items-center mb-2">
                                                <h3 className="font-bold text-gray-800">Fair Housing Act Refresher</h3>
                                                <span className="text-sm px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full">Automated Course Completion Pending for 12 Agents</span>
                                            </div>
                                            <p className="text-gray-600 text-sm">Agents due for annual Fair Housing Act refresher course completion.</p>
                                            <p className="text-xs text-gray-500 mt-2">
                                                <span className="font-semibold text-orange-600">AI Nudge:</span> 12 agents are awaiting completion confirmation for FHA refresher. Verify LMS integration status for updates.
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                            )}

                            {activeTab === 'enablement' && (
                                <div>
                                    <h2 className="text-xl font-semibold mb-4 text-gray-800">Agent Enablement & Growth</h2>
                                    <p className="text-gray-600 mb-4">
                                        Identify top-performing agents and provide resources to accelerate their growth and expertise.
                                    </p>
                                    <ul className="space-y-4">
                                        <li className="p-4 border rounded-xl shadow-sm bg-gray-50">
                                            <div className="flex justify-between items-center mb-2">
                                                <h3 className="font-bold text-gray-800">Agent Alice (Sales Team A)</h3>
                                                <span className="text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded-full">Top Performer</span>
                                            </div>
                                            <p className="text-gray-600 text-sm">Highest GCI in Q2. Consistently closing deals above asking price.</p>
                                            <p className="text-xs text-gray-500 mt-2">
                                                <span className="font-semibold text-blue-600">AI Nudge:</span> Alice is exceeding expectations. Recommend advanced negotiation playbooks or opportunities to mentor newer agents.
                                            </p>
                                        </li>
                                        <li className="p-4 border rounded-xl shadow-sm bg-gray-50">
                                            <div className="flex justify-between items-center mb-2">
                                                <h3 className="font-bold text-gray-800">Agent David (Sales Team C)</h3>
                                                <span className="text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded-full">Emerging Leader</span>
                                            </div>
                                            <p className="text-gray-600 text-sm">Rapid increase in GCI this quarter. Strong adoption of new marketing tools.</p>
                                            <p className="text-xs text-gray-500 mt-2">
                                                <span className="font-semibold text-blue-600">AI Nudge:</span> David shows strong leadership potential. Suggest enrolling him in the 'Leadership Development Playbook' for future team lead roles.
                                            </p>
                                        </li>
                                    </ul>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // Render the App component into the 'root' div
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>

</body>
</html>
