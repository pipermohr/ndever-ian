<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARC Realty: Growth Command Center</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nde-orange-700 { color: #EA580C; }
        .bg-nde-orange-700 { background-color: #EA580C; }
        .border-nde-orange-700 { border-color: #EA580C; }
        .text-nde-orange-600 { color: #F97316; }
        /* Basic reset for SVG text positioning if needed */
        svg text {
            alignment-baseline: central;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 font-inter text-gray-900 antialiased p-4 sm:p-8">

    <div id="root" class="max-w-7xl mx-auto">
        <!-- Content will be rendered here by JavaScript -->
    </div>

    <script>
        // Define the Ndever Score colors
        const NdeverColors = {
            LOW: { name: 'Low Ndever', color: '#10B981' }, // Green-500
            MEDIUM: { name: 'Medium Ndever', color: '#FBBF24' }, // Yellow-400
            HIGH: { name: 'High Ndever', color: '#FB923C' }, // Orange-400
            MAX: { name: 'Max Ndever', color: '#EA580C' }, // Orange-700 (Ndever Orange)
        };

        // Function to get color based on score
        const getScoreColor = (score) => {
            if (score >= 4) return NdeverColors.MAX;
            if (score >= 3) return NdeverColors.HIGH;
            if (score >= 2) return NdeverColors.MEDIUM;
            return NdeverColors.LOW;
        };

        // Mock Data for Objectives with Ndever Scores
        const mockObjectives = [
            { id: 'obj1', name: 'New Agent Onboarding', ndeScore: 3, completion: 65, complexityScore: 30, type: 'Organizational' }, // High Ndever
            { id: 'obj2', name: 'Q3 GCI Growth', ndeScore: 4, completion: 40, complexityScore: 60, type: 'Revenue' }, // Max Ndever
            { id: 'obj3', name: 'Compliance Checklist Completion', ndeScore: 1, completion: 80, complexityScore: 10, type: 'Maintenance' }, // Low Ndever
            { id: 'obj4', name: 'Team Training Initiative', ndeScore: 2, completion: 55, complexityScore: 25, type: 'Development' }, // Medium Ndever
            { id: 'obj5', name: 'Agent Retention Improvement', ndeScore: 3, completion: 30, complexityScore: 45, type: 'Organizational' }, // High Ndever
            { id: 'obj6', name: 'Marketing Campaign Launch', ndeScore: 2, completion: 90, complexityScore: 20, type: 'Growth' }, // Medium Ndever
        ];

        // Mock User/Group Data (Simplified from CSV, focusing on relevant roles and grouping)
        const mockUsersAndGroups = [
            { id: 'user1', name: 'Mechelle Wilder', role: 'Partner, Associate Broker, JD', department: 'Leadership', office: 'Homewood', isHighProducer: true },
            { id: 'user2', name: 'Norman Schlemmer', role: 'Managing Partner', department: 'Leadership', office: 'Cahaba Heights', isHighProducer: false },
            { id: 'user3', name: 'Amy Henson', role: 'VP of Operations', department: 'Leadership', office: 'Corporate', isHighProducer: false },
            { id: 'user4', name: 'Don Brewer', role: 'Qualifying Broker', department: 'Brokers', office: 'Wetumpka', isHighProducer: false },
            { id: 'user5', name: 'Anna-Marie Ellison', role: 'Qualifying Broker', department: 'Brokers', office: 'Highway 280/Inverness', isHighProducer: false },
            { id: 'user6', name: 'Denise Nolen', role: 'Agent Services Manager', department: 'Office Administration', office: 'Corporate', isHighProducer: false },
            { id: 'user7', name: 'Jane Bellsnyder', role: 'Office Manager', department: 'Office Administration', office: 'Homewood', isHighProducer: false },
            { id: 'user8', name: 'Stacey Cingoranelli', role: 'Transaction Coordinator', department: 'Transaction Support', office: 'Corporate', isHighProducer: false },
            // Adding some mock agents to demonstrate the "Groups" feature
            { id: 'agent1', name: 'Agent Alpha', role: 'Agent', department: 'Sales', office: 'Homewood', isHighProducer: true },
            { id: 'agent2', name: 'Agent Beta', role: 'Agent', department: 'Sales', office: 'Homewood', isHighProducer: false },
            { id: 'agent3', name: 'Agent Gamma', role: 'Agent', department: 'Sales', office: 'Wetumpka', isHighProducer: false },
            { id: 'agent4', name: 'Agent Delta', role: 'Agent', department: 'Sales', office: 'Wetumpka', isHighProducer: true },
        ];

        // Helper to group users by office (representing a "Group")
        const groupUsersByOffice = (users) => {
            return users.reduce((acc, user) => {
                const office = user.office || 'Unassigned';
                if (!acc[office]) {
                    acc[office] = [];
                }
                acc[office].push(user);
                return acc;
            }, {});
        };

        const groupedUsers = groupUsersByOffice(mockUsersAndGroups);

        let activeTab = 'visibility'; // Global state for the active tab

        // Helper function to create DOM elements
        function createElement(tag, classes = '', attributes = {}, children = []) {
            const element = document.createElement(tag);
            if (classes) element.className = classes;
            for (const key in attributes) {
                element.setAttribute(key, attributes[key]);
            }
            children.forEach(child => {
                if (typeof child === 'string') {
                    element.appendChild(document.createTextNode(child));
                } else {
                    element.appendChild(child);
                }
            });
            return element;
        }

        // Component for the Objective Ring Visualization (SVG)
        const createObjectiveRing = (completion, color, size = 24, strokeWidth = 3) => {
            const radius = (size - strokeWidth) / 2;
            const circumference = radius * 2 * Math.PI;
            const offset = circumference - (completion / 100) * circumference;

            const svg = createElement('svg', 'rounded-full', { width: size, height: size });

            const circleBg = createElement('circle', 'text-gray-300', {
                'stroke-width': strokeWidth,
                stroke: 'currentColor',
                fill: 'transparent',
                r: radius,
                cx: size / 2,
                cy: size / 2,
            });

            const circleProgress = createElement('circle', 'transition-all duration-500 ease-in-out', {
                'stroke-width': strokeWidth,
                'stroke-linecap': 'round',
                stroke: color,
                fill: 'transparent',
                r: radius,
                cx: size / 2,
                cy: size / 2,
                style: `stroke-dasharray: ${circumference}; stroke-dashoffset: ${offset}; transform: rotate(-90deg); transform-origin: 50% 50%;`,
            });

            const textElement = document.createElement('text');
            textElement.setAttribute('x', '50%');
            textElement.setAttribute('y', '50%');
            textElement.setAttribute('text-anchor', 'middle');
            textElement.setAttribute('dominant-baseline', 'middle');
            textElement.className = 'text-[8px] font-bold text-gray-700';
            textElement.textContent = `${completion}%`;

            svg.appendChild(circleBg);
            svg.appendChild(circleProgress);
            svg.appendChild(textElement);

            return svg;
        };


        // Component for the Current Objective Score Donut Chart (SVG)
        const createCurrentObjectiveScoreChart = (objectives) => {
            const totalComplexity = objectives.reduce((sum, obj) => sum + obj.complexityScore, 0);
            let cumulativeAngle = 0;

            const svg = createElement('svg', '', { width: '200', height: '200', viewBox: '0 0 200 200' });
            const outerRadius = 70;
            const innerRadius = 50;
            const centerX = 100;
            const centerY = 100;

            const toCartesian = (radius, angleInDegrees) => {
                const angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;
                return {
                    x: centerX + (radius * Math.cos(angleInRadians)),
                    y: centerY + (radius * Math.sin(angleInRadians))
                };
            };

            objectives.forEach((obj) => {
                const angle = (obj.complexityScore / totalComplexity) * 360;
                const startAngle = cumulativeAngle;
                const endAngle = cumulativeAngle + angle;
                cumulativeAngle = endAngle;

                // For completion arc
                const completionRatio = obj.completion / 100;
                const completionAngle = angle * completionRatio;
                const completionStartAngle = startAngle;
                const completionEndAngle = startAngle + completionAngle;

                const largeArcFlag = angle > 180 ? 1 : 0;
                const largeArcFlagCompletion = completionAngle > 180 ? 1 : 0;

                // Path for the segment itself (the "pie slice" part of the donut)
                const p1 = toCartesian(outerRadius, startAngle);
                const p2 = toCartesian(outerRadius, endAngle);
                const p3 = toCartesian(innerRadius, endAngle);
                const p4 = toCartesian(innerRadius, startAngle);

                const segmentPathD = [
                    `M ${p4.x} ${p4.y}`,
                    `L ${p1.x} ${p1.y}`,
                    `A ${outerRadius} ${outerRadius} 0 ${largeArcFlag} 1 ${p2.x} ${p2.y}`,
                    `L ${p3.x} ${p3.y}`,
                    `A ${innerRadius} ${innerRadius} 0 ${largeArcFlag} 0 ${p4.x} ${p4.y}`,
                    `Z`
                ].join(' ');

                // Path for the completion overlay (fills up a portion of the segment)
                const pc1 = toCartesian(outerRadius, completionStartAngle);
                const pc2 = toCartesian(outerRadius, completionEndAngle);
                const pc3 = toCartesian(innerRadius, completionEndAngle);
                const pc4 = toCartesian(innerRadius, completionStartAngle);

                const completionPathD = [
                    `M ${pc4.x} ${pc4.y}`,
                    `L ${pc1.x} ${pc1.y}`,
                    `A ${outerRadius} ${outerRadius} 0 ${largeArcFlagCompletion} 1 ${pc2.x} ${pc2.y}`,
                    `L ${pc3.x} ${pc3.y}`,
                    `A ${innerRadius} ${innerRadius} 0 ${largeArcFlagCompletion} 0 ${pc4.x} ${pc4.y}`,
                    `Z`
                ].join(' ');

                const color = getScoreColor(obj.ndeScore).color;

                const g = createElement('g');
                const baseSegment = createElement('path', 'transition-all duration-500 ease-out', { d: segmentPathD, fill: '#E5E7EB' });
                const completionSegment = createElement('path', 'transition-all duration-500 ease-out', { d: completionPathD, fill: color });

                g.appendChild(baseSegment);
                g.appendChild(completionSegment);
                svg.appendChild(g);
            });

            const overallProgressText = createElement('div', 'absolute inset-0 flex items-center justify-center text-center', [], [
                createElement('div', 'text-gray-700 text-sm font-medium', [], [
                    document.createTextNode('Overall Progress'),
                    createElement('br'),
                    createElement('span', 'text-2xl font-bold text-nde-orange-700', [], ['63%'])
                ])
            ]);

            const chartContainer = createElement('div', 'relative w-[200px] h-[200px]', [], [svg, overallProgressText]);

            const objectivesList = createElement('ul', 'grid grid-cols-1 md:grid-cols-2 gap-2');
            objectives.forEach(obj => {
                const scoreInfo = getScoreColor(obj.ndeScore);
                const listItem = createElement('li', 'flex items-center', [], [
                    createElement('span', 'inline-block w-3 h-3 rounded-full mr-2', { style: `background-color: ${scoreInfo.color}` }),
                    document.createTextNode(`${obj.name} (${obj.completion}%)`)
                ]);
                objectivesList.appendChild(listItem);
            });

            return createElement('div', 'flex flex-col items-center justify-center p-4 bg-white rounded-xl shadow-md', [], [
                createElement('h3', 'text-xl font-semibold mb-4 text-gray-800', [], ['Current Objective Score']),
                chartContainer,
                createElement('div', 'mt-4 text-sm text-gray-600', [], [
                    createElement('h4', 'font-semibold mb-2 text-gray-800', [], ['Objectives Breakdown:']),
                    objectivesList
                ])
            ]);
        };


        // Reusable Mini Card for Objectives
        const createObjectiveMiniCard = (objective) => {
            const { name, ndeScore, completion } = objective;
            const scoreInfo = getScoreColor(ndeScore);

            return createElement('div', 'flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100 min-w-[280px]', [], [
                createObjectiveRing(completion, scoreInfo.color, 48, 4),
                createElement('div', 'ml-4 flex-grow', [], [
                    createElement('h4', 'text-md font-semibold text-gray-800', [], [name]),
                    createElement('p', 'text-sm text-gray-600', [], [
                        createElement('span', 'font-medium', { style: `color: ${scoreInfo.color}` }, [scoreInfo.name]),
                        document.createTextNode(' Ndever Objective')
                    ])
                ])
            ]);
        };

        // Render functions for tab content
        const renderVisibilityTab = () => {
            const content = createElement('div');
            content.appendChild(createElement('h2', 'text-xl font-semibold mb-4 text-gray-800', [], ['Agency Visibility Overview']));
            content.appendChild(createElement('p', 'text-gray-600 mb-4', [], ['Gain a holistic, real-time pulse on your entire organization\'s performance and agent well-being.']));

            const gridContainer = createElement('div', 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4');
            for (const office in groupedUsers) {
                const users = groupedUsers[office];
                const officeDiv = createElement('div', 'p-4 border rounded-xl shadow-sm bg-gray-50');
                officeDiv.appendChild(createElement('h3', 'font-bold text-gray-800', [], [`${office} (${users.length} Users)`]));
                const userList = createElement('ul', 'mt-2 text-sm text-gray-600');
                users.slice(0, 5).forEach(user => {
                    const listItem = createElement('li', 'flex items-center justify-between py-1');
                    listItem.appendChild(document.createTextNode(user.name));
                    if (user.isHighProducer) {
                        listItem.appendChild(createElement('span', 'text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded-full', [], ['High Performer']));
                    }
                    userList.appendChild(listItem);
                });
                if (users.length > 5) {
                    userList.appendChild(createElement('li', 'text-xs text-gray-500 mt-1', [], [`...and ${users.length - 5} more`]));
                }
                officeDiv.appendChild(userList);
                gridContainer.appendChild(officeDiv);
            }
            content.appendChild(gridContainer);
            return content;
        };

        const renderOnboardingTab = () => {
            const content = createElement('div');
            content.appendChild(createElement('h2', 'text-xl font-semibold mb-4 text-gray-800', [], ['Onboarding Status: Who\'s Coming In and When?']));
            content.appendChild(createElement('p', 'text-gray-600 mb-4', [], ['Track every new agent\'s journey from hire to full productivity.']));
            const list = createElement('ul', 'space-y-4');
            list.appendChild(createElement('li', 'p-4 border rounded-xl shadow-sm bg-gray-50', [], [
                createElement('div', 'flex justify-between items-center mb-2', [], [
                    createElement('h3', 'font-bold text-gray-800', [], ['Agent Beta (Homewood Office)']),
                    createElement('span', 'text-sm px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full', [], ['65% Complete'])
                ]),
                createElement('p', 'text-gray-600 text-sm', [], ['Onboarding Playbook: MLS Access Overdue (7 days)']),
                createElement('p', 'text-xs text-gray-500 mt-2', [], [
                    createElement('span', 'font-semibold text-red-600', [], ['AI Nudge:']),
                    document.createTextNode(' Agent Beta has not completed their MLS access checklist. Suggest a reminder or offer 1:1 support.')
                ])
            ]));
            list.appendChild(createElement('li', 'p-4 border rounded-xl shadow-sm bg-gray-50', [], [
                createElement('div', 'flex justify-between items-center mb-2', [], [
                    createElement('h3', 'font-bold text-gray-800', [], ['Agent Gamma (Wetumpka Office)']),
                    createElement('span', 'text-sm px-3 py-1 bg-green-100 text-green-700 rounded-full', [], ['90% Complete'])
                ]),
                createElement('p', 'text-gray-600 text-sm', [], ['Onboarding Playbook: Ready for First Listing Prep']),
                createElement('p', 'text-xs text-gray-500 mt-2', [], [
                    createElement('span', 'font-semibold text-blue-600', [], ['AI Nudge:']),
                    document.createTextNode(' Agent Gamma is progressing well. Recommend assigning \'First Client Meeting Playbook\'.')
                ])
            ]));
            content.appendChild(list);
            return content;
        };

        const renderFlailingTab = () => {
            const content = createElement('div');
            content.appendChild(createElement('h2', 'text-xl font-semibold mb-4 text-gray-800', [], ['Agent Health: Who\'s Flailing and Needs Support?']));
            content.appendChild(createElement('p', 'text-gray-600 mb-4', [], ['Proactive alerts and insights to identify agents at risk, enabling timely intervention.']));
            const list = createElement('ul', 'space-y-4');
            list.appendChild(createElement('li', 'p-4 border rounded-xl shadow-sm bg-gray-50', [], [
                createElement('div', 'flex justify-between items-center mb-2', [], [
                    createElement('h3', 'font-bold text-gray-800', [], ['Agent Beta (Homewood Office)']),
                    createElement('span', 'text-sm px-3 py-1 bg-red-100 text-red-700 rounded-full', [], ['High Risk'])
                ]),
                createElement('p', 'text-gray-600 text-sm', [], ['Lead Conversion Rate: -15% in 30 days. No CRM activity for 5 days.']),
                createElement('p', 'text-xs text-gray-500 mt-2', [], [
                    createElement('span', 'font-semibold text-red-600', [], ['AI Nudge:']),
                    document.createTextNode(' Agent Beta\'s lead conversion has dropped significantly. Recommend assigning \'Lead Conversion Optimization Playbook\' or scheduling a coaching session.')
                ])
            ]));
            list.appendChild(createElement('li', 'p-4 border rounded-xl shadow-sm bg-gray-50', [], [
                createElement('div', 'flex justify-between items-center mb-2', [], [
                    createElement('h3', 'font-bold text-gray-800', [], ['Agent Gamma (Wetumpka Office)']),
                    createElement('span', 'text-sm px-3 py-1 bg-orange-100 text-orange-700 rounded-full', [], ['Medium Risk'])
                ]),
                createElement('p', 'text-gray-600 text-sm', [], ['Last transaction milestone not updated in 7 days.']),
                createElement('p', 'text-xs text-gray-500 mt-2', [], [
                    createElement('span', 'font-semibold text-orange-600', [], ['AI Nudge:']),
                    document.createTextNode(' Agent Gamma\'s latest transaction appears stalled. Suggest check-in or assigning \'Transaction Management Checklist\'.')
                ])
            ]));
            content.appendChild(list);
            return content;
        };

        const renderChecklistsTab = () => {
            const content = createElement('div');
            content.appendChild(createElement('h2', 'text-xl font-semibold mb-4 text-gray-800', [], ['Compliance & Checklists: Ensure Consistency']));
            content.appendChild(createElement('p', 'text-gray-600 mb-4', [], ['Monitor adherence to critical internal processes and compliance requirements agency-wide.']));
            const list = createElement('ul', 'space-y-4');
            list.appendChild(createElement('li', 'p-4 border rounded-xl shadow-sm bg-gray-50', [], [
                createElement('div', 'flex justify-between items-center mb-2', [], [
                    createElement('h3', 'font-bold text-gray-800', [], ['New Listing Checklist']),
                    createElement('span', 'text-sm px-3 py-1 bg-red-100 text-red-700 rounded-full', [], ['5 Agents Overdue'])
                ]),
                createElement('p', 'text-gray-600 text-sm', [], ['Critical tasks incomplete for multiple active listings.']),
                createElement('p', 'text-xs text-gray-500 mt-2', [], [
                    createElement('span', 'font-semibold text-red-600', [], ['AI Nudge:']),
                    document.createTextNode(' 5 agents have overdue tasks on \'Listing Activation Playbook\'. Recommend automated reminder or team-wide mini-training.')
                ])
            ]));
            list.appendChild(createElement('li', 'p-4 border rounded-xl shadow-sm bg-gray-50', [], [
                createElement('div', 'flex justify-between items-center mb-2', [], [
                    createElement('h3', 'font-bold text-gray-800', [], ['Transaction Closing Compliance']),
                    createElement('span', 'text-sm px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full', [], ['2 Agents At Risk'])
                ]),
                createElement('p', 'text-gray-600 text-sm', [], ['Pending document uploads for 2 closings this week.']),
                createElement('p', 'text-xs text-gray-500 mt-2', [], [
                    createElement('span', 'font-semibold text-orange-600', [], ['AI Nudge:']),
                    document.createTextNode(' Critical closing documents missing for Agents Delta and Epsilon. Send automated alert to agents and TC.')
                ])
            ]));
            content.appendChild(list);
            return content;
        };

        const renderAssistanceTab = () => {
            const content = createElement('div');
            content.appendChild(createElement('h2', 'text-xl font-semibold mb-4 text-gray-800', [], ['Tailored Enablement: Fuel Your Top Performers']));
            content.appendChild(createElement('p', 'text-gray-600 mb-4', [], ['Identify and accelerate your highest-potential agents with personalized growth paths.']));
            const list = createElement('ul', 'space-y-4');
            list.appendChild(createElement('li', 'p-4 border rounded-xl shadow-sm bg-gray-50', [], [
                createElement('div', 'flex justify-between items-center mb-2', [], [
                    createElement('h3', 'font-bold text-gray-800', [], ['Agent Alpha (Homewood Office)']),
                    createElement('span', 'text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded-full', [], ['High Potential'])
                ]),
                createElement('p', 'text-gray-600 text-sm', [], ['Exceeded GCI target by 20%. Completed 3 \'Lead Conversion\' playbooks.']),
                createElement('p', 'text-xs text-gray-500 mt-2', [], [
                    createElement('span', 'font-semibold text-blue-600', [], ['AI Nudge:']),
                    document.createTextNode(' Agent Alpha is excelling. Recommend assigning \'Luxury Market Expansion Playbook\' or connecting with a mentor for advanced strategies.')
                ])
            ]));
            list.appendChild(createElement('li', 'p-4 border rounded-xl shadow-sm bg-gray-50', [], [
                createElement('div', 'flex justify-between items-center mb-2', [], [
                    createElement('h3', 'font-bold text-gray-800', [], ['Mechelle Wilder (Homewood Office)']),
                    createElement('span', 'text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded-full', [], ['Leader & Top Performer'])
                ]),
                createElement('p', 'text-gray-600 text-sm', [], ['Consistently exceeds goals. Optimal workflow utilization.']),
                createElement('p', 'text-xs text-gray-500 mt-2', [], [
                    createElement('span', 'font-semibold text-blue-600', [], ['AI Nudge:']),
                    document.createTextNode(' Mechelle\'s strategic insights are invaluable. Suggest a \'Thought Leadership Playbook\' to share best practices across ARC Realty.')
                ])
            ]));
            content.appendChild(list);
            return content;
        };


        // Main render function for the dashboard
        function renderDashboard() {
            const root = document.getElementById('root');
            root.innerHTML = ''; // Clear existing content

            // Header
            const header = createElement('header', 'mb-8 bg-white p-6 rounded-xl shadow-md flex flex-col sm:flex-row justify-between items-start sm:items-center');
            header.appendChild(createElement('div', '', [], [
                createElement('h1', 'text-3xl font-bold text-gray-800', [], [
                    document.createTextNode('ARC Realty: '),
                    createElement('span', 'text-nde-orange-700', [], ['Growth Command Center'])
                ]),
                createElement('p', 'mt-2 text-lg text-gray-600', [], ['Welcome, Mechelle Wilder. Your AI-powered hub for predictable agency growth.']),
                createElement('p', 'text-sm text-gray-500 mt-1', [], ['(Partner, Associate Broker, JD & High-Producing Agent)'])
            ]));
            header.appendChild(createElement('div', 'mt-4 sm:mt-0 flex flex-col items-start sm:items-end', [], [
                createElement('span', 'text-sm text-gray-500', [], ['Last Updated: Jun 28, 2025']),
                createElement('button', 'mt-2 px-4 py-2 bg-nde-orange-700 text-white rounded-md shadow hover:bg-nde-orange-600 transition duration-200', [], ['Refresh Data'])
            ]));
            root.appendChild(header);

            // Main Content Grid
            const mainGrid = createElement('div', 'grid grid-cols-1 lg:grid-cols-3 gap-6');

            // Left Column: Metrics & Objective Scores
            const leftCol = createElement('div', 'lg:col-span-1 space-y-6');
            leftCol.appendChild(createElement('div', 'bg-white p-6 rounded-xl shadow-md', [], [
                createElement('h2', 'text-xl font-semibold mb-4 text-gray-800', [], ['Key Agency Metrics']),
                createElement('div', 'grid grid-cols-1 sm:grid-cols-2 gap-4', [], [
                    createElement('div', 'p-4 bg-gray-50 rounded-lg shadow-sm', [], [createElement('p', 'text-sm text-gray-500', [], ['Active Agents']), createElement('p', 'text-2xl font-bold text-gray-800', [], ['900+'])]),
                    createElement('div', 'p-4 bg-gray-50 rounded-lg shadow-sm', [], [createElement('p', 'text-sm text-gray-500', [], ['High-Producing Agents']), createElement('p', 'text-2xl font-bold text-green-600', [], ['~30%'])]),
                    createElement('div', 'p-4 bg-gray-50 rounded-lg shadow-sm', [], [createElement('p', 'text-sm text-gray-500', [], ['New Agents (Q2)']), createElement('p', 'text-2xl font-bold text-gray-800', [], ['45'])]),
                    createElement('div', 'p-4 bg-gray-50 rounded-lg shadow-sm', [], [createElement('p', 'text-sm text-gray-500', [], ['Agent Retention (YoY)']), createElement('p', 'text-2xl font-bold text-blue-600', [], ['88%'])])
                ])
            ]));

            // Current Objective Score Donut Chart
            leftCol.appendChild(createCurrentObjectiveScoreChart(mockObjectives));

            // Individual Objective Score Cards
            const displayObjectives = mockObjectives.slice(0, 5); // Just first 5 for display
            const objCardsContainer = createElement('div', 'bg-white p-6 rounded-xl shadow-md');
            objCardsContainer.appendChild(createElement('h2', 'text-xl font-semibold mb-4 text-gray-800', [], ['My Ndever Objectives (as Leader)']));
            const objCardsGrid = createElement('div', 'grid grid-cols-1 gap-4');
            displayObjectives.forEach(obj => objCardsGrid.appendChild(createObjectiveMiniCard(obj)));
            objCardsContainer.appendChild(objCardsGrid);
            leftCol.appendChild(objCardsContainer);
            mainGrid.appendChild(leftCol);

            // Right Column: Agent Overview & Insights
            const rightCol = createElement('div', 'lg:col-span-2 space-y-6');

            // Tab Navigation
            const tabNav = createElement('div', 'bg-white p-2 rounded-xl shadow-md flex justify-around');
            const tabs = [
                { id: 'visibility', label: 'Visibility Overview', renderer: renderVisibilityTab },
                { id: 'onboarding', label: 'Onboarding Status', renderer: renderOnboardingTab },
                { id: 'flailing', label: 'Agent Health', renderer: renderFlailingTab },
                { id: 'checklists', label: 'Compliance/Checklists', renderer: renderChecklistsTab },
                { id: 'assistance', label: 'Tailored Enablement', renderer: renderAssistanceTab }
            ];

            tabs.forEach(tab => {
                const button = createElement('button', `py-2 px-4 rounded-lg font-medium transition-colors ${activeTab === tab.id ? 'bg-gray-100 text-nde-orange-700' : 'text-gray-600 hover:bg-gray-50'}`, [], [tab.label]);
                button.addEventListener('click', () => {
                    activeTab = tab.id; // Update global state
                    renderRightColumnContent(); // Re-render only the right column content
                    // Update button active states
                    document.querySelectorAll('.tab-button').forEach(btn => {
                        btn.classList.remove('bg-gray-100', 'text-nde-orange-700');
                        btn.classList.add('text-gray-600', 'hover:bg-gray-50');
                    });
                    button.classList.add('bg-gray-100', 'text-nde-orange-700');
                    button.classList.remove('text-gray-600', 'hover:bg-gray-50');
                });
                button.classList.add('tab-button'); // Add a class to all tab buttons for easy selection
                tabNav.appendChild(button);
            });
            rightCol.appendChild(tabNav);

            // Tab Content container
            const tabContentContainer = createElement('div', 'bg-white p-6 rounded-xl shadow-md', { id: 'tab-content' });
            rightCol.appendChild(tabContentContainer);

            mainGrid.appendChild(rightCol);
            root.appendChild(mainGrid);

            // Initial render of tab content
            renderRightColumnContent();
        }

        // Function to render the content of the active tab in the right column
        function renderRightColumnContent() {
            const tabContentContainer = document.getElementById('tab-content');
            tabContentContainer.innerHTML = ''; // Clear previous content

            switch (activeTab) {
                case 'visibility':
                    tabContentContainer.appendChild(renderVisibilityTab());
                    break;
                case 'onboarding':
                    tabContentContainer.appendChild(renderOnboardingTab());
                    break;
                case 'flailing':
                    tabContentContainer.appendChild(renderFlailingTab());
                    break;
                case 'checklists':
                    tabContentContainer.appendChild(renderChecklistsTab());
                    break;
                case 'assistance':
                    tabContentContainer.appendChild(renderAssistanceTab());
                    break;
            }

             // Re-apply active styles to buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                const tabId = btn.id.replace('tab-', ''); // Assuming button IDs like 'tab-visibility'
                if (tabId === activeTab) {
                    btn.classList.add('bg-gray-100', 'text-nde-orange-700');
                    btn.classList.remove('text-gray-600', 'hover:bg-gray-50');
                } else {
                    btn.classList.remove('bg-gray-100', 'text-nde-orange-700');
                    btn.classList.add('text-gray-600', 'hover:bg-gray-50');
                }
            });
        }


        // Ensure the dashboard renders when the page loads
        window.onload = renderDashboard;

    </script>
</body>
</html>
